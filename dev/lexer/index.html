<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>SimpleLexer definition files · JLPG.jl</title><meta name="title" content="SimpleLexer definition files · JLPG.jl"/><meta property="og:title" content="SimpleLexer definition files · JLPG.jl"/><meta property="twitter:title" content="SimpleLexer definition files · JLPG.jl"/><meta name="description" content="Documentation for JLPG.jl."/><meta property="og:description" content="Documentation for JLPG.jl."/><meta property="twitter:description" content="Documentation for JLPG.jl."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">JLPG.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Getting started</a></li><li class="is-active"><a class="tocitem" href>SimpleLexer definition files</a><ul class="internal"><li><a class="tocitem" href="#Definitions"><span>Definitions</span></a></li><li><a class="tocitem" href="#Actions"><span>Actions</span></a></li><li><a class="tocitem" href="#Code"><span>Code</span></a></li><li><a class="tocitem" href="#Comments"><span>Comments</span></a></li><li><a class="tocitem" href="#Special-function-overloading"><span>Special function overloading</span></a></li><li><a class="tocitem" href="#Valid-lexer-definition-files-examples"><span>Valid lexer definition files examples</span></a></li></ul></li><li><a class="tocitem" href="../parser/">Parser definition files</a></li><li><a class="tocitem" href="../examples/">Examples</a></li><li><a class="tocitem" href="../usage/">Usage</a></li><li><span class="tocitem">API</span><ul><li><a class="tocitem" href="../api_simplelexer/">SimpleLexer</a></li><li><a class="tocitem" href="../api_parser/">Parser</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>SimpleLexer definition files</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>SimpleLexer definition files</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/Flowyh/JLPG.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/Flowyh/JLPG.jl/blob/main/docs/src/lexer.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="SimpleLexer-definition-files"><a class="docs-heading-anchor" href="#SimpleLexer-definition-files">SimpleLexer definition files</a><a id="SimpleLexer-definition-files-1"></a><a class="docs-heading-anchor-permalink" href="#SimpleLexer-definition-files" title="Permalink"></a></h1><p>The first step of creating a proper parser is to define a lexer. JLPG.jl supports generation of simplified lexer files, which rely on Julia&#39;s regex engine (PCRE2 standard).</p><p>Customarily, lexer definition files have <code>.jlex</code> extension.</p><p>Lexer definition files consist of three sections:</p><ul><li><strong>definitions</strong> - in this section regex aliases and lexer options should be defined.</li><li><strong>actions</strong> - lexer actions are defined here.</li><li><strong>code</strong> - user defined code that will be copied into the generated lexer file might be placed here.</li></ul><h2 id="Definitions"><a class="docs-heading-anchor" href="#Definitions">Definitions</a><a id="Definitions-1"></a><a class="docs-heading-anchor-permalink" href="#Definitions" title="Permalink"></a></h2><p>Definitions section is optional. It consists of regex aliases and lexer options.</p><h3 id="Regex-aliases"><a class="docs-heading-anchor" href="#Regex-aliases">Regex aliases</a><a id="Regex-aliases-1"></a><a class="docs-heading-anchor-permalink" href="#Regex-aliases" title="Permalink"></a></h3><p>Regex aliases are defined in the following way:</p><pre><code class="nohighlight hljs">ALIAS_NAME REGEX</code></pre><p>where <code>ALIAS_NAME</code> is the name of the alias and <code>REGEX</code> is the PCRE2 conformant regex that will be aliased. Regex aliases can be used in lexer actions or other regex aliases.</p><p>To use a regex alias the following syntax should be used:</p><pre><code class="nohighlight hljs">{ALIAS_NAME}</code></pre><h3 id="%option"><a class="docs-heading-anchor" href="#%option">%option</a><a id="%option-1"></a><a class="docs-heading-anchor-permalink" href="#%option" title="Permalink"></a></h3><p>Lexer options are defined in the following way:</p><pre><code class="nohighlight hljs">%option OPTION_NAME
%option KEYWORD_OPTION_NAME=VALUE</code></pre><p>where <code>OPTION_NAME</code> or <code>KEYWORD_OPTION_NAME</code> is the name of the option and <code>VALUE</code> is the value of the option. Lexer options can be used to change the behaviour of the lexer.</p><p>Currently there&#39;s only one lexer option available:</p><pre><code class="nohighlight hljs">%option tag=TAG_NAME</code></pre><p>It allows to change the prefix of all generated object names. By default it is set to <code>__LEX__</code>.</p><h2 id="Actions"><a class="docs-heading-anchor" href="#Actions">Actions</a><a id="Actions-1"></a><a class="docs-heading-anchor-permalink" href="#Actions" title="Permalink"></a></h2><p>Actions section is required. It consists of lexer actions.</p><p>Lexer actions are defined in the following way:</p><pre><code class="nohighlight hljs">PATTERN :{ ACTION }:</code></pre><p>where <code>PATTERN</code> may consist of three different parts:</p><ul><li>normal regex pattern</li><li>regex aliases</li><li>literal strings enclosed in double quotes, they are treated as normal characters (useful for matching special regex characters, like <code>*</code>, <code>+</code>, <code>?</code>, etc.)</li></ul><p><code>ACTION</code> is a Julia code that will be executed when the pattern is matched. It may consist of multiple lines of code, but it must be enclosed in special delimiters: <code>:{</code> and <code>}:</code>.</p><h3 id="Returning-tokens-from-lexer-actions"><a class="docs-heading-anchor" href="#Returning-tokens-from-lexer-actions">Returning tokens from lexer actions</a><a id="Returning-tokens-from-lexer-actions-1"></a><a class="docs-heading-anchor-permalink" href="#Returning-tokens-from-lexer-actions" title="Permalink"></a></h3><p>Lexer actions may return a token, which will be later passed to the parser. To return a token, the following syntax should be used:</p><pre><code class="nohighlight hljs">return Token(parameters...)</code></pre><p>where <code>Token</code> is the name of the token type and <code>parameters...</code> are the parameters that will be passed to the token constructor. Parameters may be named and typed, but it is not required.</p><p>If a token argument is not typed, it is assumed to be of type <code>String</code>.</p><h3 id="Token-parameters-naming-rules"><a class="docs-heading-anchor" href="#Token-parameters-naming-rules">Token parameters naming rules</a><a id="Token-parameters-naming-rules-1"></a><a class="docs-heading-anchor-permalink" href="#Token-parameters-naming-rules" title="Permalink"></a></h3><p>Parameter naming rules are as follows:</p><ul><li>If a token has only one argument and it is not named, then it&#39;s name is <code>value</code>.</li><li>If a token has more than one argument and they are not named, the their name are <code>value1</code>, <code>value2</code>, ..., <code>valueN</code>, where <code>N</code> is the position of the argument.</li><li>If an argument is named, then it is accessible by it&#39;s name.</li></ul><p>There&#39;s no need to define a tokens type before using it in a lexer action. All actions are scanned during the definition file analysis and all tokens types are automatically generated.</p><h3 id="Referencing-the-current-matched-string"><a class="docs-heading-anchor" href="#Referencing-the-current-matched-string">Referencing the current matched string</a><a id="Referencing-the-current-matched-string-1"></a><a class="docs-heading-anchor-permalink" href="#Referencing-the-current-matched-string" title="Permalink"></a></h3><p>To reference the current matched string, double dollar sign syntax should be used, for example:</p><pre><code class="nohighlight hljs">{NUMBER}                 :{
  val::Int = parse(Int, $$)
  return Number(::Int=val)
}:</code></pre><p>In this example, the currently matched number text is parsed into an integer and then passed to the <code>Number</code> token constructor.</p><h2 id="Code"><a class="docs-heading-anchor" href="#Code">Code</a><a id="Code-1"></a><a class="docs-heading-anchor-permalink" href="#Code" title="Permalink"></a></h2><p>Code section is optional. It consists of user defined code that will be pasted into the generated lexer file.</p><h3 id="Additional-code-blocks"><a class="docs-heading-anchor" href="#Additional-code-blocks">Additional code blocks</a><a id="Additional-code-blocks-1"></a><a class="docs-heading-anchor-permalink" href="#Additional-code-blocks" title="Permalink"></a></h3><p>Additionally, the user can insert additional code blocks into the definition file using the following delimiters:</p><pre><code class="nohighlight hljs">%{
...
%}</code></pre><p>Be mindful that the code blocks should not be intermixed with other definition file constructs (e.g. lexer options, regex aliases, etc.).</p><h2 id="Comments"><a class="docs-heading-anchor" href="#Comments">Comments</a><a id="Comments-1"></a><a class="docs-heading-anchor-permalink" href="#Comments" title="Permalink"></a></h2><p>Comments in lexer definition files are single-line and are enclosed by special delimiters:</p><pre><code class="nohighlight hljs">#= ... =#</code></pre><p>Comments should not be mixed with other definition file constructs (e.g. lexer options, regex aliases, etc.).</p><h2 id="Special-function-overloading"><a class="docs-heading-anchor" href="#Special-function-overloading">Special function overloading</a><a id="Special-function-overloading-1"></a><a class="docs-heading-anchor-permalink" href="#Special-function-overloading" title="Permalink"></a></h2><p>Some special functions in the generated lexer file can be overloaded by the user. The following functions can be overloaded:</p><ul><li><code>__LEX__at_end()</code> - this function is run after the lexer has finished tokenizing the input. By default it returns <code>false</code> as an indicator of success.</li><li><code>__LEX__main()</code> - this function is run when the lexer is run directly from the command line. By default it either reads the input from the standard input or from the file specified as the first command line argument and then tokenizes it.</li><li><code>__LEX__usage()</code> - used to print the helper usage message when the lexer is run incorrectly from the command line. By default it prints the following message:<pre><code class="nohighlight hljs">Usage: $(PROGRAM_FILE) [source file]</code></pre></li></ul><p>To overload a function, just define it in the code section/block of the lexer definition file.</p><h2 id="Valid-lexer-definition-files-examples"><a class="docs-heading-anchor" href="#Valid-lexer-definition-files-examples">Valid lexer definition files examples</a><a id="Valid-lexer-definition-files-examples-1"></a><a class="docs-heading-anchor-permalink" href="#Valid-lexer-definition-files-examples" title="Permalink"></a></h2><p>See <a href="../examples/#Examples">Examples</a> for valid lexer definition files examples.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Getting started</a><a class="docs-footer-nextpage" href="../parser/">Parser definition files »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="auto">Automatic (OS)</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.2.1 on <span class="colophon-date" title="Friday 8 December 2023 14:24">Friday 8 December 2023</span>. Using Julia version 1.9.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
