<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Parser definition files · JLPG.jl</title><meta name="title" content="Parser definition files · JLPG.jl"/><meta property="og:title" content="Parser definition files · JLPG.jl"/><meta property="twitter:title" content="Parser definition files · JLPG.jl"/><meta name="description" content="Documentation for JLPG.jl."/><meta property="og:description" content="Documentation for JLPG.jl."/><meta property="twitter:description" content="Documentation for JLPG.jl."/><script data-outdated-warner src="../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../search_index.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../">JLPG.jl</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../">Getting started</a></li><li><a class="tocitem" href="../lexer/">SimpleLexer definition files</a></li><li class="is-active"><a class="tocitem" href>Parser definition files</a><ul class="internal"><li><a class="tocitem" href="#Definitions"><span>Definitions</span></a></li><li><a class="tocitem" href="#Productions"><span>Productions</span></a></li><li><a class="tocitem" href="#Code"><span>Code</span></a></li><li><a class="tocitem" href="#Comments"><span>Comments</span></a></li><li><a class="tocitem" href="#Special-function-overloading"><span>Special function overloading</span></a></li><li><a class="tocitem" href="#Valid-parser-definition-files-examples"><span>Valid parser definition files examples</span></a></li></ul></li><li><a class="tocitem" href="../examples/">Examples</a></li><li><a class="tocitem" href="../usage/">Usage</a></li><li><span class="tocitem">API</span><ul><li><a class="tocitem" href="../api_simplelexer/">SimpleLexer</a></li><li><a class="tocitem" href="../api_parser/">Parser</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Parser definition files</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Parser definition files</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/Flowyh/JLPG.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/Flowyh/JLPG.jl/blob/main/docs/src/parser.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Parser-definition-files"><a class="docs-heading-anchor" href="#Parser-definition-files">Parser definition files</a><a id="Parser-definition-files-1"></a><a class="docs-heading-anchor-permalink" href="#Parser-definition-files" title="Permalink"></a></h1><p>The main purpose of this package is to generate LR parsers from Bison-like parser definition files.</p><p>Customarily, lexer definition files have <code>.jlex</code> extension.</p><p>The parser definition files consist of three sections:</p><ul><li><strong>definitions</strong> - in this section tokens, nonterminal types and options should be defined.</li><li><strong>productions</strong> - grammar rules are defined here.</li><li><strong>code</strong> - user defined code that will be copied into the generated parser file might be placed here.</li></ul><h2 id="Definitions"><a class="docs-heading-anchor" href="#Definitions">Definitions</a><a id="Definitions-1"></a><a class="docs-heading-anchor-permalink" href="#Definitions" title="Permalink"></a></h2><p>In the definition section tokens are the only parser elements that are required to be defined. They inform the parser about what tokens may come from the lexer output.</p><h3 id="%token"><a class="docs-heading-anchor" href="#%token">%token</a><a id="%token-1"></a><a class="docs-heading-anchor-permalink" href="#%token" title="Permalink"></a></h3><p>Lexer tokens are defined in the following way:</p><pre><code class="nohighlight hljs">%token TOKEN_NAME &quot;alias&quot;</code></pre><p>where <code>TOKEN_NAME</code> is the uppercased name of the token, and <code>&quot;alias&quot;</code> is the optional alias of the token. The alias is used to refer to the token in the parser productions. If the alias is not specified, the token name shall be used instead.</p><h3 id="%type"><a class="docs-heading-anchor" href="#%type">%type</a><a id="%type-1"></a><a class="docs-heading-anchor-permalink" href="#%type" title="Permalink"></a></h3><p>Nonterminal types are defined in the following way:</p><pre><code class="nohighlight hljs">%type &lt;Type&gt; nonterminal_name</code></pre><p>where <code>&lt;Type&gt;</code> is the type of the nonterminal and <code>nonterminal_name</code> is the lowercased name of the nonterminal. The type of the nonterminal may be any valid Julia type, including user-defined types. By default, if not specified, the type of the nonterminal is set to <code>Nothing</code>.</p><p>All nonterminal names in the definition file should be lowercase, and all terminal names should be uppercase. This is required to distinguish between terminals and nonterminals in the parser productions.</p><h3 id="%option"><a class="docs-heading-anchor" href="#%option">%option</a><a id="%option-1"></a><a class="docs-heading-anchor-permalink" href="#%option" title="Permalink"></a></h3><p>Parser options are defined in the following way:</p><pre><code class="nohighlight hljs">%option OPTION_NAME
%option KEYWORD_OPTION_NAME=VALUE</code></pre><p>where <code>OPTION_NAME</code> or <code>KEYWORD_OPTION_NAME</code> is the name of the option and <code>VALUE</code> is the value of the option. Parser options can be used to change the behaviour of the parser.</p><p>Currently these parser options are available:</p><pre><code class="nohighlight hljs">#= Parser type =#
%option SLR
%option LR
%option LALR

#= Tag =#
%option tag=TAG_NAME
%option lexer_tag=LEXER_TAG_NAME</code></pre><p>First three options are used to specify the type of the parser. By default the parser type is set to <code>SLR</code>.</p><p>The last two options are used to change the prefix of all generated object names. By default it is set to <code>__PAR__</code> for parser files and <code>__LEX__</code> for lexer files. To change the prefix of the parser object names, use the <code>tag</code> option. If a lexer with a custom prefix is used, the <code>lexer_tag</code> option should be used to specify the prefix of the lexer object names.</p><h2 id="Productions"><a class="docs-heading-anchor" href="#Productions">Productions</a><a id="Productions-1"></a><a class="docs-heading-anchor-permalink" href="#Productions" title="Permalink"></a></h2><p>In the productions section grammar rules are defined. The grammar rules are defined in the following way:</p><pre><code class="nohighlight hljs">lhs -&gt; rhs :{ ACTION }:</code></pre><p>where <code>lhs</code> is the name of the nonterminal on the left-hand side of the rule, <code>rhs</code> is the sequence of terminals and nonterminals on the right-hand side of the rule, and <code>ACTION</code> is the action that will be executed when the rule is reduced. The action is optional.</p><p>If a certain nonterminal has more than one production defined, the alternative production should be defined right below the first one, using the <code>|</code> symbol:</p><pre><code class="nohighlight hljs">lhs -&gt; rhs     :{ ACTION     }:
     | alt_rhs :{ ALT_ACTION }:</code></pre><h3 id="Special-production-variables"><a class="docs-heading-anchor" href="#Special-production-variables">Special production variables</a><a id="Special-production-variables-1"></a><a class="docs-heading-anchor-permalink" href="#Special-production-variables" title="Permalink"></a></h3><p>The main task of the parser is to create some sort of structurized representation of the input. To do that, the parser needs to assign variables to the <code>lhs</code> nonterminals. Just like in Bison, the variables are assigned using the <code>$</code> symbol:</p><pre><code class="nohighlight hljs">lhs -&gt; rhs :{ $$ = $1, ... $n }:</code></pre><p>where <code>$n</code> is the <code>n</code>-th element of the <code>rhs</code> sequence. The <code>$$</code> symbol can also be used to refer to the <code>lhs</code> nonterminal in the action. The type assigned to the <code>$$</code> should be the same as the type of the <code>lhs</code> nonterminal.</p><h3 id="%start"><a class="docs-heading-anchor" href="#%start">%start</a><a id="%start-1"></a><a class="docs-heading-anchor-permalink" href="#%start" title="Permalink"></a></h3><p>The first <code>lhs</code> of the first production is treated as the start symbol of the grammar. To change the start symbol, use the <code>%start</code> option:</p><pre><code class="nohighlight hljs">%start START_SYMBOL</code></pre><h2 id="Code"><a class="docs-heading-anchor" href="#Code">Code</a><a id="Code-1"></a><a class="docs-heading-anchor-permalink" href="#Code" title="Permalink"></a></h2><p>In the code section user-defined code that will be copied into the generated parser file might be placed. This section is optional.</p><h3 id="Additional-code-blocks"><a class="docs-heading-anchor" href="#Additional-code-blocks">Additional code blocks</a><a id="Additional-code-blocks-1"></a><a class="docs-heading-anchor-permalink" href="#Additional-code-blocks" title="Permalink"></a></h3><p>Additionally, the user can insert additional code blocks into the definition file using the following delimiters:</p><pre><code class="nohighlight hljs">%{
...
%}</code></pre><p>Be mindful that the code blocks should not be intermixed with other definition file constructs (e.g. parser options, productions, etc.).</p><h2 id="Comments"><a class="docs-heading-anchor" href="#Comments">Comments</a><a id="Comments-1"></a><a class="docs-heading-anchor-permalink" href="#Comments" title="Permalink"></a></h2><p>Comments in parser definition files are single-line and are enclosed by special delimiters:</p><pre><code class="nohighlight hljs">#= ... =#</code></pre><p>Comments should not be mixed with other definition file constructs (e.g. parser options, productions, etc.).</p><h2 id="Special-function-overloading"><a class="docs-heading-anchor" href="#Special-function-overloading">Special function overloading</a><a id="Special-function-overloading-1"></a><a class="docs-heading-anchor-permalink" href="#Special-function-overloading" title="Permalink"></a></h2><p>Some special functions in the generated parser file can be overloaded by the user. The following functions can be overloaded:</p><ul><li><code>__PAR__at_end()</code> - this function is run after the parser has finished parsing the input. By default it returns <code>false</code> as an indicator of success.</li><li><code>__PAR__main()</code> - this function is run when the parser is run directly from the command line. By default it either reads the input from the file specified as the first command line argument, tokenizes it using the provided lexer and then proceeds to parse it.</li><li><code>__PAR__usage()</code> - used to print the helper usage message when the parser is run incorrectly from the command line. By default it prints the following message:<pre><code class="nohighlight hljs">Usage: $(PROGRAM_FILE) [source file]</code></pre></li></ul><p>To overload a function, just define it in the code section/block of the parser definition file.</p><h2 id="Valid-parser-definition-files-examples"><a class="docs-heading-anchor" href="#Valid-parser-definition-files-examples">Valid parser definition files examples</a><a id="Valid-parser-definition-files-examples-1"></a><a class="docs-heading-anchor-permalink" href="#Valid-parser-definition-files-examples" title="Permalink"></a></h2><p>See <a href="../examples/#Examples">Examples</a> for valid parser definition files examples.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../lexer/">« SimpleLexer definition files</a><a class="docs-footer-nextpage" href="../examples/">Examples »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="auto">Automatic (OS)</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.2.1 on <span class="colophon-date" title="Friday 8 December 2023 14:24">Friday 8 December 2023</span>. Using Julia version 1.9.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
